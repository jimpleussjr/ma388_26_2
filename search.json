[
  {
    "objectID": "lessons/lsn_2_intro_to_R.html",
    "href": "lessons/lsn_2_intro_to_R.html",
    "title": "MA388 Sabermetrics: Lesson 2",
    "section": "",
    "text": "library(Lahman)\nlibrary(tidyverse)\nlibrary(knitr)"
  },
  {
    "objectID": "lessons/lsn_2_intro_to_R.html#compiling-an-.rmd-file",
    "href": "lessons/lsn_2_intro_to_R.html#compiling-an-.rmd-file",
    "title": "MA388 Sabermetrics: Lesson 2",
    "section": "Compiling an .Rmd file",
    "text": "Compiling an .Rmd file\nYou’ll submit most (all?) assignments in this course as PDFs via the Class Notebook in Teams. Let’s make sure you can produce a PDF from R Markdown. If you already know how to do this, sit tight for a minute…\nIf this is new for you, you’ll need to install a TeX distribution. This is easy with TinyTeX.\n\ninstall.packages(\"tinytex\")\n\nWith that package loaded, you’re ready to install TeX.\n\ntinytex::install_tinytex()\n\nNow you should be able to download the source file for these class notes (see Class Notebook - Lesson 2) and “Knit to PDF.” Make sure this works before the end of class today."
  },
  {
    "objectID": "lessons/lsn_2_intro_to_R.html#review",
    "href": "lessons/lsn_2_intro_to_R.html#review",
    "title": "MA388 Sabermetrics: Lesson 2",
    "section": "Review",
    "text": "Review\n\nYou are investigating whether the hit-and-run is a good strategy. Which data set should you use?\n\n\nYou are investigating whether pitchers throw more fastballs to hitters at the bottom of the batting order. Which data set would you use?\n\n\nUse R to find career batting average (H/AB) leaders of your favorite team. More specifically, select a team and report a table of the 10 players with at least 2500 at bats (AB) with the highest batting averages while playing for that team.\n\n\n\n\nRed Sox Career Batting Average Leaders\n\n\nplayerID\nH\nAB\nAVG\n\n\n\n\nwillite01\n2654\n7706\n0.344\n\n\nboggswa01\n2098\n6213\n0.338\n\n\nspeaktr01\n1327\n3935\n0.337\n\n\ngarcino01\n1281\n3968\n0.323\n\n\nrunnepe01\n825\n2578\n0.320\n\n\nfoxxji01\n1051\n3288\n0.320\n\n\npeskyjo01\n1277\n4085\n0.313\n\n\nramirma02\n1232\n3953\n0.312\n\n\nlynnfr01\n944\n3062\n0.308\n\n\ngoodmbi01\n1344\n4399\n0.306"
  },
  {
    "objectID": "lessons/lsn_2_intro_to_R.html#merging-data-frames-pg-41",
    "href": "lessons/lsn_2_intro_to_R.html#merging-data-frames-pg-41",
    "title": "MA388 Sabermetrics: Lesson 2",
    "section": "Merging Data Frames (pg 41)",
    "text": "Merging Data Frames (pg 41)\nWhen using a relational database (what does that mean again?), a common task is to add information from one table to another. For example, consider our table above from the review. Add the player’s name and when they played their final game.\n\n# I called my table from the review redSox.\n\nredSox &lt;- redSox |&gt;\n  left_join(select(People, playerID, nameLast, nameFirst, finalGame), by = \"playerID\" )\n\nYour turn…the HallofFame data frame contains data on every Hall of Fame ballot. Add to your table above whether the player is in the Hall of Fame. (hint: filter(inducted == \"Y\"))\n\n\n\nRed Sox career batting average leaders\n\n\n\n\n\n\n\n\n\n\n\n\n\nplayerID\nH\nAB\nAVG\nnameLast\nnameFirst\nfinalGame\nyearID\ninducted\n\n\n\n\nwillite01\n2654\n7706\n0.344\nWilliams\nTed\n1960-09-28\n1966\nY\n\n\nboggswa01\n2098\n6213\n0.338\nBoggs\nWade\n1999-08-27\n2005\nY\n\n\nspeaktr01\n1327\n3935\n0.337\nSpeaker\nTris\n1928-08-30\n1937\nY\n\n\ngarcino01\n1281\n3968\n0.323\nGarciaparra\nNomar\n2009-10-04\nNA\nNA\n\n\nrunnepe01\n825\n2578\n0.320\nRunnels\nPete\n1964-05-14\nNA\nNA\n\n\nfoxxji01\n1051\n3288\n0.320\nFoxx\nJimmie\n1945-09-23\n1951\nY\n\n\npeskyjo01\n1277\n4085\n0.313\nPesky\nJohnny\n1954-09-24\nNA\nNA\n\n\nramirma02\n1232\n3953\n0.312\nRamirez\nManny\n2011-04-06\nNA\nNA\n\n\nlynnfr01\n944\n3062\n0.308\nLynn\nFred\n1990-10-03\nNA\nNA\n\n\ngoodmbi01\n1344\n4399\n0.306\nGoodman\nBilly\n1962-09-30\nNA\nNA\n\n\n\n\n\nWhat cleaning would you still want to do to this table to make it more readable?\nWhat is the difference between left_join(), right_join(), inner_join(), and outer_join()?"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "MA388 Sabermetrics AY26-2",
    "section": "",
    "text": "Welcome to MA388 Sabermetrics for AY26-2.\nUse the navigation menu above to access lesson materials."
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this site\n\n1 + 1\n\n[1] 2"
  },
  {
    "objectID": "lessons/lsn_1_course_intro.html",
    "href": "lessons/lsn_1_course_intro.html",
    "title": "MA388 Sabermetrics: Lesson 1",
    "section": "",
    "text": "Contact Information\nLTC Jim Pleuss\njames.pleuss@westpoint.edu\nThayer Hall Room 233\n845-938-7675\nPACE: email, Teams, drop-in, phone\n\n\nCourse Overview\nSabermetrics\n\nCourse Texts/Videos/Blogs\nHands-on/Interactive\nR/RStudio\nCalendar Overview\nGraded Events (Problem Sets and Project)\n\n\n\nIntroductions\nAt some point this semester everyone in this room will be graded on their ability to name everyone else in this room from memory. Start learning names today.\nPlease tell us your:\n\nPreferred Name\nHometown\nMajor\nBranch/Desired Branch\nActivities (Sports, Clubs, Interests)\nUnique Skill / Random Fact\nSong (title and artist) that ups your mood anytime you hear it.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nDAW, Section Marcher Role\nBottom line: Do the right thing. I don’t want to have to correct you, but I will. If you don’t know what the right thing to do is, just ask. Too easy!\n\n\nCourse Introduction\nThis course is about three big things (in my mind):\n\nbaseball\nstatistics\ndata science skills\n\nYou’re going to learn a lot about all three. My hope is that you will recognize that the statistics we study and the data science skills you learn through our study of baseball are applicable to many other domains outside of baseball. Are we tricking you into learning some valuable skills by making it about baseball? Maybe…\n\nYou can expect me to…\n\nBe kind and treat you with respect.\nBe approachable and available.\nGet to know you as an individual.\nBe enthusiastic and show relevance of the course to your life.\nSet the conditions for your success.\nUnderstand you have other things going on in your life.\nMake mistakes.\n\n\n\nI expect you to…\n\nKeep an open mind and grow as future officers in our profession.\nBe responsible for your learning.\nUse a variety of sources to aid in understanding.\nKeep me informed of what’s going on in your life.\nActively participate in class.\nBe respectful of your classmates\nMake mistakes. Maybe even more than me…\n\n\n\nCourse Documentation (located on Canvas)\n\nSyllabus (Course Calendar)\nInstructional Memo\nLesson Notes (prior to the lesson)\nProblem Sets (about 10 days in advance of due date)\n\n\n\nCourse Texts\nThe Marchi, Albert, and Baumer text is available online: https://beanumber.github.io/abdwr3e/.\nA collection of functions and data sets for the Marchi text is available here: https://github.com/beanumber/abdwr3edata.\nThe Costa, Huber, and Saccoman text will be provided by the instructor later in the semester.\n\n\nBaseball Video\nIf you need a short introduction to the rules and general flow of a baseball game, this video is a good place to start.\n\nhttps://www.youtube.com/watch?v=skOsApsF0jQ\n\n\n\n\nChapter 1 - Baseball Datasets\n\nThe Lahman Database - Season by Season Data (since 1871)\nRetrosheet - Game by Game Data (since 1871); Play by Play Data (since 1921)\nPITCHf/x - Pitch by Pitch (since 2008)\nStatcast - Launch Angle, Exit Velocity, Distance, Player Positioning (since 2015)\n\nHow do we get all this amazing baseball data? Read Section 1.7 in ABDWR closely. Some data we’ll use will come from packages, and some data will take a bit more effort to assemble…but we can do it.\n\n\n\nChapter 2 - Intro to R\nTidyverse Verbs\n\nselect()\nfilter()\nmutate()\ngroup_by()\nsummarize()\narrange()\n\nLet’s investigate how home run rates in Major League Baseball have changed over time. The R package Lahman imports data from Sean Lahman’s Baseball Archive. In this example, we will use the Batting data frame in the package.\n\nlibrary(Lahman)    # loads data frames in the Lahman package\nlibrary(knitr)     # prints pretty tables with the kable function\nlibrary(tidyverse) # tons of useful stuff - ggplot2, dplyr, ...\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.2     ✔ tibble    3.3.0\n✔ lubridate 1.9.4     ✔ tidyr     1.3.1\n✔ purrr     1.1.0     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\n# Batting data frame contains one line per player per season per stint.\n# Here are players with the most home runs for a single team in a season.\nBatting |&gt; \n  select(playerID, yearID, stint, lgID, HR, AB) |&gt; \n  arrange(-HR) |&gt; \n  head(10) |&gt; \n  kable()\n\n\n\n\nplayerID\nyearID\nstint\nlgID\nHR\nAB\n\n\n\n\nbondsba01\n2001\n1\nNL\n73\n476\n\n\nmcgwima01\n1998\n1\nNL\n70\n509\n\n\nsosasa01\n1998\n1\nNL\n66\n643\n\n\nmcgwima01\n1999\n1\nNL\n65\n521\n\n\nsosasa01\n2001\n1\nNL\n64\n577\n\n\nsosasa01\n1999\n1\nNL\n63\n625\n\n\njudgeaa01\n2022\n1\nAL\n62\n570\n\n\nmarisro01\n1961\n1\nAL\n61\n590\n\n\nruthba01\n1927\n1\nAL\n60\n540\n\n\nruthba01\n1921\n1\nAL\n59\n540\n\n\n\n\n\n\nTeams |&gt; \n  mutate(decade = floor(yearID/10)*10) |&gt; \n  relocate(decade,.after='yearID') |&gt; \n  summarize(HRs = sum(HR), Gs = sum(G),.by=decade) |&gt; \n  mutate(HRperG = HRs/Gs) |&gt; \n  arrange(decade) |&gt; \n  ggplot(aes(x=decade,y=HRperG))+\n  geom_bar(stat='identity')\n\n\n\n\n\n\n\n\nSteps to coding an exploration of home run rates over the years:\n\nInclude only players in Major League Baseball.\nCalculate the total number of home runs (HR) and at-bats (AB) each season.\nCalculate the home run rate each season.\n\n\n# Calculate the home run rate for each season.\nhomeRuns &lt;- Batting |&gt; \n  filter(lgID %in% c(\"AL\",\"NL\")) |&gt; \n  group_by(yearID) |&gt; \n  summarize(HR = sum(HR),\n            AB = sum(AB)) |&gt; \n  mutate(rate = HR/AB)\n\nhomeRuns |&gt; \n  head(10) |&gt; \n  kable(digits = 4)\n\n\n\n\nyearID\nHR\nAB\nrate\n\n\n\n\n1876\n40\n20121\n0.0020\n\n\n1877\n24\n13667\n0.0018\n\n\n1878\n23\n13644\n0.0017\n\n\n1879\n58\n24155\n0.0024\n\n\n1880\n62\n24301\n0.0026\n\n\n1881\n76\n24377\n0.0031\n\n\n1882\n126\n24769\n0.0051\n\n\n1883\n124\n29012\n0.0043\n\n\n1884\n321\n32687\n0.0098\n\n\n1885\n174\n31123\n0.0056\n\n\n\n\n\nLet’s look at a plot (more on plotting next lesson)…\n\nhomeRuns |&gt; \n  ggplot(aes(x = yearID,\n             y = rate)) +\n  geom_line() +\n  labs(x = \"Year\",\n       y = \"Home Run Rate\")\n\n\n\n\nHome run rate in Major League Baseball by year."
  },
  {
    "objectID": "lessons/lsn_2_intro_to_R.html#compiling-an-.qmd-file",
    "href": "lessons/lsn_2_intro_to_R.html#compiling-an-.qmd-file",
    "title": "MA388 Sabermetrics: Lesson 2",
    "section": "Compiling an .qmd file",
    "text": "Compiling an .qmd file\nYou’ll submit most assignments in this course as PDFs via Canvas. Let’s make sure you can produce a PDF from Quarto Markdown. If you already know how to do this, sit tight for a minute…\nIf this is new for you, you’ll need to install a TeX distribution. This is easy with TinyTeX.\n\ninstall.packages(\"tinytex\")\n\nWith that package loaded, you’re ready to install TeX.\n\ntinytex::install_tinytex()\n\nNow you should be able to download the source file for these class notes (see “lsn_2_intro_to_R.qmd”) and “Render to PDF.” Make sure this works before the end of class today."
  },
  {
    "objectID": "lessons/lsn_2_intro_to_R.html#r-syntax-best-practices",
    "href": "lessons/lsn_2_intro_to_R.html#r-syntax-best-practices",
    "title": "MA388 Sabermetrics: Lesson 2",
    "section": "R Syntax Best Practices",
    "text": "R Syntax Best Practices\n\nVariable Assignemnt\nA lot of folks like to use the = sign to assign variable names. While it generally does work, the more appropriate syntax is -&gt; or &lt;-, depending on which side of the argument your variable name is. = is used more for\n\n\nPiping\nThe pipe passes the output of the previous argument to the first argument of the following function. It’s incredibly useful for data munging. You are probably most familiar with the pipe that looks like |&gt;. However, that pipe is specific to the dplyr package. There is now a pipe that is native to base R that is probably better to use |&gt;."
  },
  {
    "objectID": "lessons/textbook_toc.html",
    "href": "lessons/textbook_toc.html",
    "title": "textbook summary",
    "section": "",
    "text": "1  The Baseball Datasets\n\n1.1 Introduction\n1.2 The Lahman Database: Season-by-Season Data\n1.3 Retrosheet Game-by-Game Data\n1.4 Retrosheet Play-by-Play Data\n1.5 Pitch-by-Pitch Data\n1.6 Player Movement and Off-the-Bat Data\n1.7 Data Used in this Book\n1.8 Summary\n1.9 Further Reading\n1.10 Exercises\n\n2  Introduction to R\n\n2.1 Introduction\n2.2 Installing R and RStudio\n2.3 The Tidyverse\n2.4 Data Frames\n2.5 Vectors\n2.6 Objects and Containers in R\n2.7 Collection of R Commands\n2.8 Reading and Writing Data in R\n2.9 Packages\n2.10 Splitting, Applying, and Combining Data\n2.11 Getting Help\n2.12 Further Reading\n2.13 Exercises\n\n3  Graphics\n\n3.1 Introduction\n3.2 Character Variable\n3.3 Saving Graphs\n3.4 Numeric Variable: One-Dimensional Scatterplot and Histogram\n3.5 Two Numeric Variables\n3.6 A Numeric Variable and a Factor Variable\n3.7 Comparing Ruth, Aaron, Bonds, and A-Rod\n3.8 The 1998 Home Run Race\n3.9 Further Reading\n3.10 Exercises\n\n4  The Relation Between Runs and Wins\n\n4.1 Introduction\n4.2 The Teams Table in the Lahman Database\n4.3 Linear Regression\n4.4 The Pythagorean Formula for Winning Percentage\n4.5 How Many Runs for a Win?\n4.6 Further Reading\n4.7 Exercises\n\n5  Value of Plays Using Run Expectancy\n\n5.1 The Run Expectancy Matrix\n5.2 Runs Scored in the Remainder of the Inning\n5.3 Creating the Matrix\n5.4 Measuring Success of a Batting Play\n5.5 José Altuve\n5.6 Opportunity and Success for All Hitters\n5.7 Position in the Batting Lineup\n5.8 Run Values of Different Base Hits\n5.9 Value of Base Stealing\n5.10 Further Reading and Software\n5.11 Exercises\n\n6  Balls and Strikes Effects\n\n6.1 Introduction\n6.2 Hitter’s Counts and Pitcher’s Counts\n6.3 Behaviors by Count\n6.4 Further Reading\n6.5 Exercises\n\n7  Catcher Framing\n\n7.1 Introduction\n7.2 Acquiring Pitch-Level Data\n7.3 Where Is the Strike Zone?\n7.4 Modeling Called Strike Percentage\n7.5 Modeling Catcher Framing\n7.6 Further Reading\n7.7 Exercises\n\n8  Career Trajectories\n\n8.1 Introduction\n8.2 Mickey Mantle’s Batting Trajectory\n8.3 Comparing Trajectories\n8.4 General Patterns of Peak Ages\n8.5 Trajectories and Fielding Position\n8.6 Further Reading\n8.7 Exercises\n\n9  Simulation\n\n9.1 Introduction\n9.2 Simulating a Half Inning\n9.3 Simulating a Baseball Season\n9.4 Further Reading\n9.5 Exercises\n\n10  Exploring Streaky Performances\n\n10.1 Introduction\n10.2 The Great Streak\n10.3 Streaks in Individual At-Bats\n10.4 Local Patterns of Statcast Launch Velocity\n10.5 Further Reading\n10.6 Exercises\n\n11  Using a Database to Compute Park Factors\n\n11.1 Introduction\n11.2 Installing MySQL and Creating a Database\n11.3 Connecting R to MySQL\n11.4 Filling a MySQL Game Log Database from R\n11.5 Querying Data from R\n11.6 Building Your Own Baseball Database\n11.7 Calculating Basic Park Factors\n11.8 Further Reading\n11.9 Exercises\n\n12  Working with Large Data\n\n12.1 Introduction\n12.2 Acquiring a Year’s Worth of Statcast Data\n12.3 Storing Large Data Efficiently\n12.4 Performance Comparison\n12.5 Launch Angles and Exit Velocities, Revisited\n12.6 Further Reading\n12.7 Exercises\n\n13  Home Run Hitting\n\n13.1 Introduction\n13.2 Exploring a Season of Home Run Hitting\n13.3 Comparing Home Run Hitting in the 2021 and 2023 Seasons\n13.4 Further Reading\n13.5 Exercises\n\n14  Making a Scientific Presentation using Quarto\n\n14.1 Introduction to Slides in Quarto\n14.2 Example: Jim’s Presentation on Home Run Hitting\n14.3 Alternative Output Formats\n14.4 Further Reading\n14.5 Exercises\n\n15  Using Shiny for Baseball Applications\n\n15.1 Introduction\n15.2 Comparing Two Pitcher Trajectories\n15.3 Creating the Shiny App\n15.4 Sharing the App\n15.5 Tips for Getting Started Making Apps\n15.6 Further Reading\n15.7 Exercises\n\nAppendices\n\nA  Retrosheet Files Reference\nB  Historical Notes on PITCHf/x Data\nC  Statcast Data Reference\nReferences\n\n\nProblem Set descriptions:\n\nData set exploration and dplyr functions\nPlotting career trajectories\nRegression of Win% vs run differential\nSacrifice Bunt"
  },
  {
    "objectID": "lessons/lsn_3_intro_to_R_II.html",
    "href": "lessons/lsn_3_intro_to_R_II.html",
    "title": "MA388 Sabermetrics: Lesson 3",
    "section": "",
    "text": "library(Lahman)\nlibrary(tidyverse)\nlibrary(knitr)"
  },
  {
    "objectID": "lessons/lsn_3_intro_to_R_II.html#review",
    "href": "lessons/lsn_3_intro_to_R_II.html#review",
    "title": "MA388 Sabermetrics: Lesson 3",
    "section": "Review",
    "text": "Review\nKey Concepts\n\nfive tidyverse verbs\nrelational databases\n\nReview Questions\n\nUsing the Teams data frame, calculate average wins (W) per season for each MLB team from 2000-present. Order your results from the best teams to the worst.\n\n\n\n\n\n\nteamID\nW\nG\nWpct\n\n\n\n\nNYA\n2286\n3946\n0.579\n\n\nLAN\n2239\n3948\n0.567\n\n\nSLN\n2179\n3945\n0.552\n\n\nATL\n2152\n3945\n0.546\n\n\nBOS\n2145\n3947\n0.543\n\n\nANA\n425\n810\n0.525\n\n\nSFN\n2052\n3946\n0.520\n\n\nCLE\n2046\n3945\n0.519\n\n\nOAK\n2030\n3946\n0.514\n\n\nHOU\n2029\n3947\n0.514\n\n\nLAA\n1609\n3138\n0.513\n\n\nPHI\n2019\n3947\n0.512\n\n\nMIN\n1984\n3949\n0.502\n\n\nTOR\n1977\n3947\n0.501\n\n\nNYN\n1976\n3946\n0.501\n\n\nSEA\n1975\n3948\n0.500\n\n\nCHN\n1969\n3947\n0.499\n\n\nTBA\n1959\n3946\n0.496\n\n\nMIL\n1960\n3949\n0.496\n\n\nFLO\n963\n1942\n0.496\n\n\nTEX\n1937\n3949\n0.491\n\n\nARI\n1922\n3948\n0.487\n\n\nCHA\n1911\n3948\n0.484\n\n\nWAS\n1510\n3136\n0.482\n\n\nSDN\n1888\n3949\n0.478\n\n\nCIN\n1861\n3950\n0.471\n\n\nDET\n1841\n3943\n0.467\n\n\nCOL\n1809\n3949\n0.458\n\n\nBAL\n1805\n3948\n0.457\n\n\nMON\n368\n810\n0.454\n\n\nPIT\n1767\n3944\n0.448\n\n\nKCA\n1737\n3948\n0.440\n\n\nMIA\n868\n2002\n0.434\n\n\n\n\n\n\nUsing the Teams data frame, calculate how many World Series titles (WSWin) each team had during this period and add this information to your table in the previous question.\n\n\n\n\nWin Percentage and World Series Titles by Team (2000-present).\n\n\nteamID\nW\nG\nWpct\nWSWins\n\n\n\n\nNYA\n2286\n3946\n0.579\n2\n\n\nLAN\n2239\n3948\n0.567\n2\n\n\nSLN\n2179\n3945\n0.552\n2\n\n\nATL\n2152\n3945\n0.546\n1\n\n\nBOS\n2145\n3947\n0.543\n4\n\n\nANA\n425\n810\n0.525\n1\n\n\nSFN\n2052\n3946\n0.520\n3\n\n\nCLE\n2046\n3945\n0.519\n0\n\n\nOAK\n2030\n3946\n0.514\n0\n\n\nHOU\n2029\n3947\n0.514\n2\n\n\nLAA\n1609\n3138\n0.513\n0\n\n\nPHI\n2019\n3947\n0.512\n1\n\n\nMIN\n1984\n3949\n0.502\n0\n\n\nTOR\n1977\n3947\n0.501\n0\n\n\nNYN\n1976\n3946\n0.501\n0\n\n\nSEA\n1975\n3948\n0.500\n0\n\n\nCHN\n1969\n3947\n0.499\n1\n\n\nTBA\n1959\n3946\n0.496\n0\n\n\nMIL\n1960\n3949\n0.496\n0\n\n\nFLO\n963\n1942\n0.496\n1\n\n\nTEX\n1937\n3949\n0.491\n1\n\n\nARI\n1922\n3948\n0.487\n1\n\n\nCHA\n1911\n3948\n0.484\n1\n\n\nWAS\n1510\n3136\n0.482\n1\n\n\nSDN\n1888\n3949\n0.478\n0\n\n\nCIN\n1861\n3950\n0.471\n0\n\n\nDET\n1841\n3943\n0.467\n0\n\n\nCOL\n1809\n3949\n0.458\n0\n\n\nBAL\n1805\n3948\n0.457\n0\n\n\nMON\n368\n810\n0.454\n0\n\n\nPIT\n1767\n3944\n0.448\n0\n\n\nKCA\n1737\n3948\n0.440\n1\n\n\nMIA\n868\n2002\n0.434\n0"
  },
  {
    "objectID": "lessons/lsn_3_intro_to_R_II.html#introduction-to-r-day-2",
    "href": "lessons/lsn_3_intro_to_R_II.html#introduction-to-r-day-2",
    "title": "MA388 Sabermetrics: Lesson 3",
    "section": "Introduction to R (Day 2)",
    "text": "Introduction to R (Day 2)\n\nSplit, Apply, and Combine Data\nIt’s important in data science to be able to write procedures and apply them over a data set. The Marchi text refers to this as “splitting, applying, and combining data.” In other words, we split a data frame into pieces, apply a procedure or function to each piece, and then combine the results into a new data frame.\nWays to “split, apply, and combine”…\n\ngroup_by() and summarize() functions\nsplit() and map_df() functions\n\nIn general, these coding tasks involve three steps:\n\nWrite a function to perform the task on one split of the data.\nSplit the data on a variable.\nApply the function to each split of the data.\n\n\n\nExample\n\nThree steps:\n\nWrite a function that takes a data frame and returns the team with the most wins and whether they won the World Series.\nPull the yearIDs you will split on.\nSplit the data frame on year.\nApply the function to each split.\n\n\n# Step 1 - Write a function.\nmostWins &lt;- function(data){\n  data |&gt; \n    arrange(-W) |&gt; \n    select(teamID, W, WSWin) |&gt; \n    head(1)\n}\n\n# Step 2 - Pull the years you will split on.\nyear &lt;- Teams |&gt; \n  filter(yearID &gt;= 2000) |&gt; \n  group_by(yearID) |&gt; \n  group_keys() |&gt; \n  pull(yearID)\n\n# Steps 3 and 4 - Split and apply.\nwinLeaders &lt;- Teams |&gt; \n  filter(yearID &gt;= 2000) |&gt; \n  split(year) |&gt;\n  map_df(mostWins, .id = \"yearID\")\n\nwinLeaders |&gt; \n  kable(caption = \"Major League win leaders by season and whether they won the World Series.\")\n\n\nMajor League win leaders by season and whether they won the World Series.\n\n\nyearID\nteamID\nW\nWSWin\n\n\n\n\n2000\nSFN\n97\nN\n\n\n2001\nSEA\n116\nN\n\n\n2002\nNYA\n103\nN\n\n\n2003\nATL\n101\nN\n\n\n2004\nSLN\n105\nN\n\n\n2005\nSLN\n100\nN\n\n\n2006\nNYN\n97\nN\n\n\n2007\nBOS\n96\nY\n\n\n2008\nLAA\n100\nN\n\n\n2009\nNYA\n103\nY\n\n\n2010\nPHI\n97\nN\n\n\n2011\nPHI\n102\nN\n\n\n2012\nWAS\n98\nN\n\n\n2013\nBOS\n97\nY\n\n\n2014\nLAA\n98\nN\n\n\n2015\nSLN\n100\nN\n\n\n2016\nCHN\n103\nY\n\n\n2017\nLAN\n104\nN\n\n\n2018\nBOS\n108\nY\n\n\n2019\nHOU\n107\nN\n\n\n2020\nLAN\n43\nY\n\n\n2021\nSFN\n107\nN\n\n\n2022\nLAN\n111\nN\n\n\n2023\nATL\n104\nN\n\n\n2024\nLAN\n98\nY\n\n\n\n\n\n\n\n\nYour Turn\n\n\n\n\nMajor League win leaders by season and whether they won the World Series.\n\n\nyearID\nname\nHR\n\n\n\n\n2000\nHouston Astros\n249\n\n\n2001\nTexas Rangers\n246\n\n\n2002\nTexas Rangers\n230\n\n\n2003\nTexas Rangers\n239\n\n\n2004\nChicago White Sox\n242\n\n\n2005\nTexas Rangers\n260\n\n\n2006\nChicago White Sox\n236\n\n\n2007\nMilwaukee Brewers\n231\n\n\n2008\nChicago White Sox\n235\n\n\n2009\nNew York Yankees\n244\n\n\n2010\nToronto Blue Jays\n257\n\n\n2011\nNew York Yankees\n222\n\n\n2012\nNew York Yankees\n245\n\n\n2013\nBaltimore Orioles\n212\n\n\n2014\nBaltimore Orioles\n211\n\n\n2015\nToronto Blue Jays\n232\n\n\n2016\nBaltimore Orioles\n253\n\n\n2017\nNew York Yankees\n241\n\n\n2018\nNew York Yankees\n267\n\n\n2019\nMinnesota Twins\n307\n\n\n2020\nLos Angeles Dodgers\n118\n\n\n2021\nToronto Blue Jays\n262\n\n\n2022\nNew York Yankees\n254\n\n\n2023\nAtlanta Braves\n307\n\n\n2024\nNew York Yankees\n237\n\n\n\n\n\nWhat’s the difference between select() and pull()? One key difference is they return different data types.\n\nHRLeaders |&gt; \n  select(yearID)\n\n   yearID\n1    2000\n2    2001\n3    2002\n4    2003\n5    2004\n6    2005\n7    2006\n8    2007\n9    2008\n10   2009\n11   2010\n12   2011\n13   2012\n14   2013\n15   2014\n16   2015\n17   2016\n18   2017\n19   2018\n20   2019\n21   2020\n22   2021\n23   2022\n24   2023\n25   2024\n\nHRLeaders |&gt; \n  pull(yearID)\n\n [1] \"2000\" \"2001\" \"2002\" \"2003\" \"2004\" \"2005\" \"2006\" \"2007\" \"2008\" \"2009\"\n[11] \"2010\" \"2011\" \"2012\" \"2013\" \"2014\" \"2015\" \"2016\" \"2017\" \"2018\" \"2019\"\n[21] \"2020\" \"2021\" \"2022\" \"2023\" \"2024\""
  }
]